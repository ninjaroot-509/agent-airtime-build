(self.webpackChunkbling_agent=self.webpackChunkbling_agent||[]).push([[623],{24753:(e,n,t)=>{"use strict";t.d(n,{A:()=>y});var a=t(90620),r=t.n(a),s=t(96446),i=t(85865),d=t(88446),o=t(35475),l=t(22698),c=t(70579);function u(e){let{links:n,activeLast:t=!1,...a}=e;const r=n[n.length-1].name,d=n.map((e=>(0,c.jsx)(m,{link:e},e.name))),o=n.map((e=>(0,c.jsx)("div",{children:e.name!==r?(0,c.jsx)(m,{link:e}):(0,c.jsx)(i.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:r})},e.name)));return(0,c.jsx)(l.A,{separator:(0,c.jsx)(s.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...a,children:t?d:o})}function m(e){let{link:n}=e;const{href:t,name:a,icon:r}=n;return(0,c.jsxs)(d.A,{variant:"body2",component:o.N_,to:t||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[r&&(0,c.jsx)(s.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:r}),a]},a)}function y(e){let{links:n,action:t,heading:a,moreLink:o=[],sx:l,...m}=e;return(0,c.jsxs)(s.A,{sx:{mb:5,...l},children:[(0,c.jsxs)(s.A,{sx:{display:"flex",alignItems:"center"},children:[(0,c.jsxs)(s.A,{sx:{flexGrow:1},children:[(0,c.jsx)(i.A,{variant:"h4",gutterBottom:!0,children:a}),(0,c.jsx)(u,{links:n,...m})]}),t&&(0,c.jsx)(s.A,{sx:{flexShrink:0},children:t})]}),(0,c.jsx)(s.A,{sx:{mt:2},children:r()(o)?(0,c.jsx)(d.A,{href:o,target:"_blank",rel:"noopener",variant:"body2",children:o}):o.map((e=>(0,c.jsx)(d.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},26187:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>qe});var a=t(65043),r=t(19252),s=t(48407),i=t(11737),d=t(19838),o=t(24753),l=t(12110),c=t(85865),u=t(96446),m=t(68903),y=t(67254),x=t(76839),h=t(25078),p=t(12299),b=t(72035),v=t(35866),_=t(32143),f=t(81637),A=t(74605),j=t(51962),g=t(11906),C=t(88911),k=t(83462),I=t(4219),S=t(35316),T=t(29347),W=t(79913),B=t(83665),R=t(73216),q=t(72812),w=t(58390),M=t(94068),F=t(19825),N=t(14961),D=t(20974),O=t(26240),E=t(52509),$=t(63025),P=t(30342),U=t(34535),L=t(84794),K=t(65890),H=t(11137),Z=t(70579);const X=(0,U.Ay)("div")((e=>{let{theme:n}=e;return{right:0,bottom:0,zIndex:99999,width:"100%",height:"100%",position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"}}));function z(e){let{isDashboard:n,...t}=e;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(H.A,{}),!n&&(0,Z.jsxs)(X,{...t,children:[(0,Z.jsx)(W.m.div,{initial:{rotateY:0},animate:{rotateY:360},transition:{duration:2,ease:"easeInOut",repeatDelay:1,repeat:1/0},children:(0,Z.jsx)(K.A,{width:87,height:130,disabledLink:!0})}),(0,Z.jsx)(u.A,{component:W.m.div,animate:{scale:[1.2,1,1,1.2,1.2],rotate:[270,0,0,270,270],opacity:[.25,1,1,1,.25],borderRadius:["25%","25%","50%","50%","25%"]},transition:{ease:"linear",duration:3.2,repeat:1/0},sx:{width:140,height:140,borderRadius:"25%",position:"absolute",border:e=>`solid 3px ${(0,L.X4)(e.palette.primary.dark,.24)}`}}),(0,Z.jsx)(u.A,{component:W.m.div,animate:{scale:[1,1.2,1.2,1,1],rotate:[0,270,270,0,0],opacity:[1,.25,.25,.25,1],borderRadius:["25%","25%","50%","50%","25%"]},transition:{ease:"linear",duration:3.2,repeat:1/0},sx:{width:160,height:160,borderRadius:"25%",position:"absolute",border:e=>`solid 8px ${(0,L.X4)(e.palette.primary.dark,.24)}`}})]})]})}var J=t(73338),V=t(86111),G=t.n(V);const Y="CL",Q="CLP",ee=[{value:"send",labelKey:"remesas.sendMode.send"},{value:"calc",labelKey:"remesas.sendMode.calc"}],ne={Cash:"2",Bank:"1",Wallet:"3"};function te(e,n,t){const a={},r=(e||"").toUpperCase().trim();return n.bankName.trim()||(a.bankName=t("remesas.validation.bankNameRequired")),n.bankAccType||(a.bankAccType=t("remesas.validation.bankAccTypeRequired")),"AR"===r?(/^\d{22}$/.test(n.CBU||"")||(a.CBU=t("remesas.validation.cbuInvalid")),n.bankDocument.trim()||(a.bankDocument=t("remesas.validation.cuitRequired")),n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankAccountRequired"))):"BR"===r?(n.bankBranch.trim()||(a.bankBranch=t("remesas.validation.agencyRequired")),n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankAccountRequired")),/^\d{11}$/.test(n.CPF||"")||(a.CPF=t("remesas.validation.cpfInvalid"))):"CL"===r?(n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankAccountRequired")),/^\d{7,8}-[\dkK]$/.test(n.RUT||"")||(a.RUT=t("remesas.validation.rutInvalid"))):"US"===r||"USA"===r||"UNITED STATES"===r?(n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankAccountRequired")),/^\d{9}$/.test(n.RoutingNumber||"")||(a.RoutingNumber=t("remesas.validation.routingInvalid"))):"IN"===r||"INDIA"===r?(n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankAccountRequired")),/^[A-Za-z]{4}0[A-Za-z0-9]{6}$/.test(n.IFSC||"")||(a.IFSC=t("remesas.validation.ifscInvalid"))):n.bankAccount.trim()||(a.bankAccount=t("remesas.validation.bankIbanRequired")),{valid:0===Object.keys(a).length,errors:a}}const ae=e=>(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.iso_code)||(null===e||void 0===e?void 0:e.country_code)||(null===e||void 0===e?void 0:e.value)||"",re=e=>(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.description)||"",se=(e,n)=>e.find((e=>ae(e)===n))||null,ie=(e,n)=>e.find((e=>ae(e)===n))||null,de=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.key)||"",oe=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||de(e),le=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.key)||"",ce=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||le(e),ue=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.key)||(null===e||void 0===e?void 0:e.id)||"",me=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||ue(e),ye=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.key)||"",xe=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||ye(e),he=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.currency)||(null===e||void 0===e?void 0:e.iso_code)||"",pe=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||he(e),be=e=>(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.key)||"",ve=e=>(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.description)||be(e),_e=e=>(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.state_id)||"",fe=e=>(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.description)||(null===e||void 0===e?void 0:e.state_name)||"",Ae=e=>(null===e||void 0===e?void 0:e.state_id)||(null===e||void 0===e?void 0:e.stateId)||(null===e||void 0===e?void 0:e.state)||(null===e||void 0===e?void 0:e.state_code)||"",je=e=>(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e?void 0:e.code)||(null===e||void 0===e?void 0:e.city_id)||"",ge=e=>(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.label)||(null===e||void 0===e?void 0:e.description)||(null===e||void 0===e?void 0:e.city_name)||"",Ce=e=>e.bank_id||e.BankID||e.bankId||e.bank_id_dest||e.BankId||"",ke=e=>({first_name:e.first_name||"",middle_name:e.middle_name||"",last_name:e.last_name||"",maiden_name:e.maiden_name||"",phone:e.phone||"",email:e.email||"",date_of_birth:e.dateOfBirth||null,activity:e.activity||"",profession:e.profession||"",position:e.position||"",marital_status:e.marital_status||"",gender:e.gender||"",nationality:e.nationality||"",addr_state:e.stateId||null,addr_city:e.cityId||null,addr_street:e.address||"",doc_type:e.doc_type||"",doc_number:e.doc_number||"",doc_issue_date:e.doc_issue_date||null,doc_due_date:e.doc_due_date||null,doc_country:e.doc_country||e.nationality||""}),Ie=e=>({first_name:e.first_name||"",middle_name:e.middle_name||"",last_name:e.last_name||"",maiden_name:e.maiden_name||"",phone:e.phone||"",email:e.email||"",date_of_birth:e.dateOfBirth||null,activity:e.activity||"",profession:e.profession||"",position:e.position||"",marital_status:e.marital_status||"",gender:e.gender||"",nationality:e.nationality||"",addr_state:e.stateId||null,addr_city:e.cityId||null,addr_street:e.address||"",doc_type:e.doc_type||"",doc_number:e.doc_number||"",doc_issue_date:e.doc_issue_date||null,doc_due_date:e.doc_due_date||null,doc_country:e.doc_country||e.nationality||""}),Se={payout_method:"",sendMode:"send",selectedSenderId:"",selectedBeneId:"",calcType:"3",amount:"",payoutCurrency:"",calcCountry:"",calcStateId:"",calcCityId:"",beneCountry:"",beneStateId:"",beneCityId:"",beneAddress:"",password:"",acceptTerms:!1,relationship:"10",purpose_code:"1",bene_message:""},Te={bankName:"",bankAccType:"",bankAccount:"",bankDocument:"",bankBranch:"",bankCity:"",CBU:"",CPF:"",RUT:"",RoutingNumber:"",IFSC:"",bankId:""},We={partnerId:"",first_name:"",middle_name:"",last_name:"",maiden_name:"",phone:"",email:"",doc_type:"",doc_number:"",doc_issue_date:"",doc_due_date:"",doc_country:Y,nationality:Y,gender:"",marital_status:"",activity:"",profession:"",position:"",dateOfBirth:"",state:"",city:"",stateId:"",cityId:"",address:""},Be={partnerId:"",first_name:"",middle_name:"",last_name:"",maiden_name:"",phone:"",email:"",doc_type:"",doc_number:"",doc_issue_date:"",doc_due_date:"",doc_country:"",nationality:"",gender:"",marital_status:"",activity:"",profession:"",position:"",dateOfBirth:"",state:"",city:"",stateId:"",cityId:"",address:""};function Re(){const e=(0,E.wA)(),{t:n}=(0,N.B)(),{user:t}=(0,P.A)(),{countries:r,currenciesByCountry:i,genders:d,typeDocs:o,typeSents:U,calcSents:L,typeBanks:K,statesByCountry:H,citiesByCountry:X,citiesByState:V,relationships:Re,purposes:qe}=(0,E.d4)((e=>e.remesas)),we=(0,R.Zp)(),{enqueueSnackbar:Me}=(0,B.dh)(),[Fe,Ne]=(0,a.useState)(null),[De,Oe]=(0,a.useState)(0),[Ee,$e]=(0,a.useState)(Se),[Pe,Ue]=(0,a.useState)(!1),[Le,Ke]=(0,a.useState)([]),[He,Ze]=(0,a.useState)(!1),[Xe,ze]=(0,a.useState)(""),[Je,Ve]=(0,a.useState)({}),[Ge,Ye]=(0,a.useState)(!1),[Qe,en]=(0,a.useState)(""),[nn,tn]=(0,a.useState)(Te),[an,rn]=(0,a.useState)({}),[sn,dn]=(0,a.useState)(!1),[on,ln]=(0,a.useState)(!1),[cn,un]=(0,a.useState)(We),[mn,yn]=(0,a.useState)(Be),[xn,hn]=(0,a.useState)(null),[pn,bn]=(0,a.useState)(null),[vn,_n]=(0,a.useState)({}),[fn,An]=(0,a.useState)({}),[jn,gn]=(0,a.useState)(!1),[Cn,kn]=(0,a.useState)(!1),[In,Sn]=(0,a.useState)([]),[Tn,Wn]=(0,a.useState)(!1),[Bn,Rn]=(0,a.useState)(0),[qn,wn]=(0,a.useState)(""),[Mn,Fn]=(0,a.useState)([]),[Nn,Dn]=(0,a.useState)(!1),On="send"===Ee.sendMode,En=(0,a.useMemo)((()=>[n("remesas.steps.send.type"),n("remesas.steps.send.parties"),n("remesas.steps.send.amount")]),[n]),$n=(0,a.useMemo)((()=>[n("remesas.steps.calc.type"),n("remesas.steps.calc.amount")]),[n]),Pn=On?En:$n,Un=Le.find((e=>String(e.id||e.pk)===String(Ee.selectedSenderId))),Ln=Je[Ee.selectedSenderId]||[],Kn=Ln.find((e=>String(e.id||e.pk)===String(Ee.selectedBeneId)));(0,a.useEffect)((()=>{On&&$e(Kn?e=>({...e,beneCountry:e.beneCountry||Kn.nationality||"",beneStateId:Kn.addr_state||"",beneCityId:Kn.addr_city||"",beneAddress:Kn.addr_street||""}):e=>({...e,beneCountry:e.beneCountry||"",beneStateId:"",beneCityId:"",beneAddress:""}))}),[On,Kn]),(0,a.useEffect)((()=>{Ee.beneCountry&&(e((0,$.s6)(Ee.beneCountry)),e((0,$.TF)(Ee.beneCountry)))}),[e,Ee.beneCountry]),(0,a.useEffect)((()=>{Ee.beneStateId&&e((0,$.Wv)(Ee.beneStateId))}),[e,Ee.beneStateId]);const Hn=(0,a.useMemo)((()=>H[Ee.beneCountry]||[]),[H,Ee.beneCountry]),Zn=(0,a.useMemo)((()=>X[Ee.beneCountry]||[]),[X,Ee.beneCountry]),Xn=(On?Ee.beneCountry||(Kn?Kn.nationality:""):Ee.calcCountry||"")||"",zn=(0,a.useMemo)((()=>U.map((e=>{const n=me(e),t=function(e){const n=(e||"").toLowerCase();return n.includes("bank")||n.includes("banque")||n.includes("banco")?"Bank":n.includes("wallet")||n.includes("monedero")||n.includes("portefeuille")?"Wallet":"Cash"}(n),a=String(ue(e)||ne[t]||"");return{id:ue(e),value:t,label:n,mmCode:a,img:"Bank"===t?"/static/icons/bank.png":"Wallet"===t?"/static/icons/wallet.png":"/static/icons/cash.png"}}))),[U]),Jn=(0,a.useMemo)((()=>L.map((e=>({value:ye(e),label:xe(e)})))),[L]),Vn=(0,a.useMemo)((()=>d.map((e=>({value:de(e),label:oe(e)})))),[d]),Gn=(0,a.useMemo)((()=>o.map((e=>({value:le(e),label:ce(e)})))),[o]),Yn=(0,a.useMemo)((()=>K.map((e=>({value:be(e)||e.value,label:ve(e)})))),[K]),Qn=(0,a.useMemo)((()=>(i[Xn]||[]).map((e=>({value:he(e),label:pe(e)})))),[i,Xn]),et=(0,a.useMemo)((()=>(Re||[]).map((e=>({value:ue(e),label:me(e)})))),[Re]),nt=(0,a.useMemo)((()=>(qe||[]).map((e=>({value:ue(e),label:me(e)})))),[qe]),tt=(0,a.useMemo)((()=>zn.find((e=>e.value===Ee.payout_method))||null),[zn,Ee.payout_method]),at="Bank"===(null===tt||void 0===tt?void 0:tt.value),rt="Wallet"===(null===tt||void 0===tt?void 0:tt.value),st=(0,a.useMemo)((()=>at?(Mn||[]).map((e=>({id:e.id,name:e.name}))):[]),[at,Mn]),it=(0,a.useMemo)((()=>{if(!In.length)return[];if(!at||!qn)return In;return In.some((e=>Ce(e)))?In.filter((e=>String(Ce(e))===String(qn))):In}),[In,at,qn]),dt=(0,a.useMemo)((()=>it.length&&(it[Bn]||it[0])||null),[it,Bn]),ot=(0,a.useMemo)((()=>{if(!dt)return{amount:0,fee:0,payout:0,debit:0,sendCurrency:Q,payCurrency:Ee.payoutCurrency||""};const e=(0,J.KZ)(dt.send_amount||dt.SendAmount||0),n=(0,J.KZ)(dt.fees||dt.Fees||0),t=(0,J.KZ)(null!=dt.total_send?dt.total_send:null!=dt.TotalSend?dt.TotalSend:e+n);return{amount:e,fee:n,payout:(0,J.KZ)(dt.payment_amount||dt.PaymentAmount||0),debit:t,sendCurrency:dt.send_currency||dt.SendCurrency||Q,payCurrency:dt.payment_currency||dt.PaymentCurrency||Ee.payoutCurrency||""}}),[dt,Ee.payoutCurrency]),lt="1"===Ee.calcType?Ee.payoutCurrency||"":Q,ct=On&&2===De||!On&&1===De,ut=(0,a.useMemo)((()=>H[cn.nationality]||[]),[H,cn.nationality]),mt=(0,a.useMemo)((()=>X[cn.nationality]||[]),[X,cn.nationality]),yt=(0,a.useMemo)((()=>H[mn.nationality]||[]),[H,mn.nationality]),xt=(0,a.useMemo)((()=>X[mn.nationality]||[]),[X,mn.nationality]),ht=(0,a.useMemo)((()=>H[Ee.calcCountry]||[]),[H,Ee.calcCountry]),pt=(0,a.useMemo)((()=>X[Ee.calcCountry]||[]),[X,Ee.calcCountry]),bt=e=>n=>$e((t=>({...t,[e]:n.target.value}))),vt=e=>n=>{const t=n.target.value;tn((n=>({...n,[e]:t}))),rn((n=>({...n,[e]:void 0})))},_t=e=>n=>{const t=n.target.value;un((n=>({...n,[e]:t}))),_n((n=>({...n,[e]:void 0})))},ft=e=>n=>{const t=n.target.value;yn((n=>({...n,[e]:t}))),An((n=>({...n,[e]:void 0})))};function At(e){let n=String(e||"").replace(/more money transfers\//i,"").replace(/more money\//i,"").trim();if(!n)return"";const t=n.split(/[\|\-\,\/]+/).map((e=>e.trim().replace(/\s+/g," ").toUpperCase())).filter(Boolean);if(0===t.length)return n;const a=[...new Set(t)];return 1===a.length?a[0]:a.join(" | ")}const jt=(0,a.useMemo)((()=>0===De?!!Ee.payout_method&&!!Ee.sendMode:!On||1!==De||!!Ee.selectedSenderId&&!!Ee.selectedBeneId),[De,On,Ee.payout_method,Ee.sendMode,Ee.selectedSenderId,Ee.selectedBeneId]),gt=(0,a.useMemo)((()=>{if(!ct)return!1;if(!Ee.amount||!Ee.calcType||!Ee.payoutCurrency)return!1;if(!dt)return!1;if(On){if(!Ee.password||!Ee.acceptTerms)return!1;if(!Un||!Kn)return!1;if(at){const{valid:e}=te(Xn,nn,n);if(!e)return!1}}return!0}),[ct,On,Ee.amount,Ee.calcType,Ee.payoutCurrency,Ee.password,Ee.acceptTerms,dt,Un,Kn,nn,Xn,at,n]);(0,a.useEffect)((()=>{e((0,$.X6)()),e((0,$.fC)()),e((0,$.IH)()),e((0,$.U6)()),e((0,$.xW)()),e((0,$.yb)()),e((0,$.AU)()),e((0,$.OG)())}),[e]),(0,a.useEffect)((()=>{Xn&&Ee.payout_method&&e((0,$.h6)(Xn,Ee.payout_method))}),[e,Xn,Ee.payout_method]),(0,a.useEffect)((()=>{cn.nationality&&(e((0,$.s6)(cn.nationality)),e((0,$.TF)(cn.nationality)))}),[e,cn.nationality]),(0,a.useEffect)((()=>{cn.stateId&&e((0,$.Wv)(cn.stateId))}),[e,cn.stateId]),(0,a.useEffect)((()=>{mn.nationality&&(e((0,$.s6)(mn.nationality)),e((0,$.TF)(mn.nationality)))}),[e,mn.nationality]),(0,a.useEffect)((()=>{mn.stateId&&e((0,$.Wv)(mn.stateId))}),[e,mn.stateId]),(0,a.useEffect)((()=>{Ee.calcCountry&&(e((0,$.s6)(Ee.calcCountry)),e((0,$.TF)(Ee.calcCountry)))}),[e,Ee.calcCountry]),(0,a.useEffect)((()=>{Ee.calcStateId&&e((0,$.Wv)(Ee.calcStateId))}),[e,Ee.calcStateId]),(0,a.useEffect)((()=>{(zn.length||Jn.length||Qn.length||et.length||nt.length)&&$e((e=>{let n={...e},t=!1;if(!n.payout_method&&zn.length){const e=zn[0].value;e&&e!==n.payout_method&&(n.payout_method=e,t=!0)}if(!n.calcType&&Jn.length){const e=Jn[0].value;e&&e!==n.calcType&&(n.calcType=e,t=!0)}if(!n.payoutCurrency&&Qn.length){const e=Qn[0].value;e&&e!==n.payoutCurrency&&(n.payoutCurrency=e,t=!0)}if(!n.relationship&&et.length){const e=et[0].value;e&&e!==n.relationship&&(n.relationship=e,t=!0)}if(!n.purpose_code&&nt.length){const e=nt[0].value;e&&e!==n.purpose_code&&(n.purpose_code=e,t=!0)}return t?n:e}))}),[zn,Jn,Qn,et,nt]),(0,a.useEffect)((()=>{Yn.length&&tn((e=>{if(e.bankAccType)return e;const n=Yn[0].value;return n&&n!==e.bankAccType?{...e,bankAccType:n}:e}))}),[Yn]),(0,a.useEffect)((()=>{let e=!0;return(async()=>{try{Ze(!0);const n=await(0,$.Jp)();if(!e)return;Ke(n.results||n)}catch(n){}finally{e&&Ze(!1)}})(),()=>{e=!1}}),[]),(0,a.useEffect)((()=>{if(!Xe||Xe.length<2)return;let e=!0;const n=setTimeout((async()=>{try{Ze(!0);const n=await(0,$.Jp)({search:Xe});if(!e)return;Ke(n.results||n)}catch(n){}finally{e&&Ze(!1)}}),300);return()=>{e=!1,clearTimeout(n)}}),[Xe]),(0,a.useEffect)((()=>{if(!Ee.selectedSenderId)return;let e=!0;const n=setTimeout((async()=>{try{Ye(!0);const n=Qe&&Qe.length>=2?{search:Qe}:{},t=await(0,$.Mb)(Ee.selectedSenderId,n);if(!e)return;Ve((e=>({...e,[Ee.selectedSenderId]:t.results||t})))}catch(n){}finally{e&&Ye(!1)}}),300);return()=>{e=!1,clearTimeout(n)}}),[Ee.selectedSenderId,Qe]),(0,a.useEffect)((()=>{if(!ct)return;if(!Ee.amount)return Sn([]),void Rn(0);let e=!0;const n=setTimeout((async()=>{try{Wn(!0);const n=(null===tt||void 0===tt?void 0:tt.mmCode)||"",t={country:Xn,city_id:On?Ee.beneCityId||"":Ee.calcCityId||"",bank_id:at&&(nn.bankId||qn)||"",payment_currency:Ee.payoutCurrency,calc_type:Ee.calcType,amount:String(Ee.amount).replace(",","."),payout_method:n},a=await(0,$.xK)(t);if(!e)return;const r=a.options||[];Sn(r),Rn(0)}catch(n){Sn([]),Rn(0)}finally{e&&Wn(!1)}}),300);return()=>{e=!1,clearTimeout(n)}}),[ct,Ee.amount,Ee.payoutCurrency,Ee.calcType,Ee.payout_method,nn.bankId,qn,at,tt,Xn,On,Ee.calcCityId]),(0,a.useEffect)((()=>{if(!at)return Fn([]),void wn("");if(!Ee.payoutCurrency)return;let e=!0;return(async()=>{try{Dn(!0);const n=await(0,$.Kj)({country:Xn,currency:Ee.payoutCurrency});if(!e)return;const t=n||[];Fn(t),t.length?wn((e=>e||String(t[0].id))):wn("")}catch(n){e&&(Fn([]),wn(""))}finally{e&&Dn(!1)}})(),()=>{e=!1}}),[at,Ee.payoutCurrency,Xn]),(0,a.useEffect)((()=>{if(!at)return;if(!qn&&st.length)return void wn(st[0].id);if(!qn)return;const e=st.find((e=>String(e.id)===String(qn)));e&&tn((n=>({...n,bankId:qn,bankName:e.name||n.bankName||""})))}),[at,qn,st]);const Ct=(0,O.A)();return null!==t&&void 0!==t&&t.transfer_opt_in?(0,Z.jsx)(w.$,{dateAdapter:M.h,children:(0,Z.jsxs)(u.A,{sx:{position:"relative"},children:[Pe&&(0,Z.jsx)(u.A,{sx:{position:"absolute",inset:0,zIndex:20,bgcolor:"rgba(255,255,255,0.7)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Z.jsx)(z,{})}),(0,Z.jsxs)(m.Ay,{container:!0,spacing:2,children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:10,children:(0,Z.jsxs)(l.A,{sx:{p:3,borderRadius:2,bgcolor:"background.default","&::before":{content:'""',position:"absolute",inset:0,background:"radial-gradient(circle at 20% 30%, rgba(255,200,120,0.35), transparent 60%), radial-gradient(circle at 80% 70%, rgba(90,150,255,0.3), transparent 60%)",zIndex:0}},children:[Fe&&(0,Z.jsx)(u.A,{sx:{mb:2},children:(0,Z.jsx)(y.A,{severity:"error",children:Fe})}),(0,Z.jsx)(x.A,{activeStep:De,alternativeLabel:!0,sx:{mb:3},children:Pn.map((e=>(0,Z.jsx)(h.A,{children:(0,Z.jsx)(p.A,{children:e})},e)))}),0===De&&(0,Z.jsxs)(m.Ay,{container:!0,spacing:3,children:[(0,Z.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,Z.jsx)(c.A,{variant:"subtitle1",sx:{mb:1},children:n("remesas.sections.paymentMethod.title")}),!zn.length&&(0,Z.jsx)(c.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:n("remesas.sections.paymentMethod.empty")}),(0,Z.jsx)(m.Ay,{container:!0,spacing:2,children:zn.map((e=>(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsxs)(l.A,{onClick:()=>$e((n=>({...n,payout_method:e.value}))),sx:{p:2,cursor:"pointer",textAlign:"center",borderRadius:2,border:Ee.payout_method===e.value?"2px solid #1976d2":"0.5px solid #e0e0e0",transition:"all .2s","&:hover":{boxShadow:4}},children:[(0,Z.jsx)(u.A,{sx:{mb:1,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,Z.jsx)(u.A,{sx:{width:48,height:48,display:"flex",justifyContent:"center",alignItems:"center"},children:e.img&&(0,Z.jsx)("img",{src:e.img,alt:e.label,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",display:"block"}})})}),(0,Z.jsx)(c.A,{variant:"body2",sx:{fontWeight:Ee.payout_method===e.value?600:400},children:n(`remesas.enums.branchType.${e.id}`)})]})},e.value)))})]}),(0,Z.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,Z.jsx)(c.A,{variant:"subtitle1",sx:{mb:1},children:n("remesas.sections.operationMode.title")}),(0,Z.jsx)(m.Ay,{container:!0,spacing:2,children:ee.map((e=>(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsxs)(l.A,{onClick:()=>$e((n=>({...n,sendMode:e.value}))),sx:{p:2,cursor:"pointer",textAlign:"center",borderRadius:2,border:Ee.sendMode===e.value?"2px solid #1976d2":"0.5px solid #e0e0e0",bgcolor:Ct.palette.background.paper,transition:"0.2s","&:hover":{boxShadow:4}},children:[(0,Z.jsx)(u.A,{sx:{mb:1,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,Z.jsx)(u.A,{sx:{width:48,height:48,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,Z.jsx)("img",{src:"send"===e.value?"/static/icons/send.png":"/static/icons/calculate.png",alt:n(e.labelKey),style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",display:"block"}})})}),(0,Z.jsx)(c.A,{variant:"body2",sx:{fontWeight:Ee.sendMode===e.value?600:400},children:n(e.labelKey)})]})},e.value)))})]})]}),On&&1===De&&(0,Z.jsxs)(m.Ay,{container:!0,spacing:3,children:[(0,Z.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,Z.jsx)(c.A,{variant:"subtitle1",sx:{mb:1},children:n("remesas.sender.title")}),(0,Z.jsx)(b.A,{fullWidth:!0,options:Le,loading:He,value:Un||null,onInputChange:(e,n)=>ze(n),getOptionLabel:e=>e?e.display||`${e.first_name} ${e.last_name}`:"",onChange:(e,n)=>$e((e=>({...e,selectedSenderId:n?n.id||n.pk:"",selectedBeneId:""}))),renderInput:e=>(0,Z.jsx)(v.A,{...e,label:n("remesas.sender.searchLabel"),required:!0})}),(0,Z.jsxs)(u.A,{sx:{mt:1,display:"flex",gap:1},children:[(0,Z.jsx)(q.A,{variant:"outlined",startIcon:(0,Z.jsx)(D.A,{icon:"eva:person-add-outline"}),onClick:()=>{hn(null),un(We),_n({}),dn(!0)},children:n("remesas.sender.add")}),(0,Z.jsx)(q.A,{variant:"text",startIcon:(0,Z.jsx)(D.A,{icon:"eva:edit-2-outline"}),onClick:()=>{Un&&(hn(Un.id||Un.pk),_n({}),un({...We,first_name:Un.first_name||"",middle_name:Un.middle_name||"",last_name:Un.last_name||"",maiden_name:Un.maiden_name||"",phone:Un.phone||"",email:Un.email||"",nationality:Un.nationality||"",doc_type:Un.doc_type||"",doc_number:Un.doc_number||"",doc_issue_date:Un.doc_issue_date||"",doc_due_date:Un.doc_due_date||"",doc_country:Un.doc_country||"",doc_issue_date:Un.doc_issue_date||"",doc_due_date:Un.doc_due_date||"",gender:Un.gender||"",marital_status:Un.marital_status||"",activity:Un.activity||"",profession:Un.profession||"",position:Un.position||"",dateOfBirth:Un.date_of_birth||"",stateId:Un.addr_state||"",cityId:Un.addr_city||"",address:Un.addr_street||""}),dn(!0))},disabled:!Un,children:n("remesas.sender.edit")})]})]}),Un&&(0,Z.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,Z.jsx)(c.A,{variant:"subtitle1",sx:{mb:1},children:n("remesas.bene.title")}),(0,Z.jsx)(b.A,{fullWidth:!0,options:Ln,loading:Ge,value:Kn||null,onInputChange:(e,n)=>en(n),getOptionLabel:e=>e?e.display||`${e.first_name} ${e.last_name}`:"",onChange:(e,n)=>$e((e=>({...e,selectedBeneId:n?n.id||n.pk:""}))),renderInput:e=>(0,Z.jsx)(v.A,{...e,label:n("remesas.bene.searchLabel"),required:!0})}),(0,Z.jsxs)(u.A,{sx:{mt:1,display:"flex",gap:1},children:[(0,Z.jsx)(q.A,{variant:"outlined",startIcon:(0,Z.jsx)(D.A,{icon:"eva:person-add-outline"}),onClick:()=>{bn(null),yn(Be),An({}),ln(!0)},disabled:!Ee.selectedSenderId,children:n("remesas.bene.add")}),(0,Z.jsx)(q.A,{variant:"text",startIcon:(0,Z.jsx)(D.A,{icon:"eva:edit-2-outline"}),onClick:()=>{Kn&&(bn(Kn.id||Kn.pk),An({}),yn({...Be,first_name:Kn.first_name||"",middle_name:Kn.middle_name||"",last_name:Kn.last_name||"",maiden_name:Kn.maiden_name||"",phone:Kn.phone||"",email:Kn.email||"",nationality:Kn.nationality||"",doc_type:Kn.doc_type||"",doc_number:Kn.doc_number||"",doc_issue_date:Kn.doc_issue_date||"",doc_due_date:Kn.doc_due_date||"",doc_country:Kn.doc_country||"",gender:Kn.gender||"",marital_status:Kn.marital_status||"",activity:Kn.activity||"",profession:Kn.profession||"",position:Kn.position||"",dateOfBirth:Kn.date_of_birth||"",stateId:Kn.addr_state||"",cityId:Kn.addr_city||"",address:Kn.addr_street||""}),ln(!0))},disabled:!Kn,children:n("remesas.bene.edit")})]})]})]}),ct&&(0,Z.jsxs)(m.Ay,{container:!0,spacing:3,children:[On&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:3,children:(0,Z.jsxs)(l.A,{sx:{p:2},children:[(0,Z.jsx)(c.A,{variant:"subtitle2",children:n("remesas.sender.title")}),Un?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(c.A,{variant:"body2",children:[Un.first_name," ",(0,Z.jsx)("br",{}),Un.last_name]}),(0,Z.jsx)(c.A,{variant:"body2",children:Un.email}),(0,Z.jsx)(c.A,{variant:"body2",children:Un.phone}),(null===Un||void 0===Un?void 0:Un.addr_state)&&(0,Z.jsxs)(c.A,{variant:"body2",children:[Un.addr_city," (",Un.addr_state,")"]})]}):(0,Z.jsx)(c.A,{variant:"body2",color:"text.secondary",children:n("remesas.sender.noneSelected")})]})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:9,children:(0,Z.jsxs)(l.A,{sx:{p:2},children:[(0,Z.jsx)(c.A,{variant:"subtitle2",children:n("remesas.bene.title")}),Kn?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(c.A,{variant:"body2",children:[Kn.first_name,(0,Z.jsx)("br",{}),Kn.last_name]}),(0,Z.jsx)(c.A,{variant:"body2",sx:{mb:1},children:Kn.phone}),(0,Z.jsxs)(m.Ay,{container:!0,spacing:2,children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:3.5,children:(0,Z.jsx)(b.A,{fullWidth:!0,options:r,value:se(r,Ee.beneCountry),onChange:(e,n)=>$e((e=>({...e,beneCountry:n?ae(n):"",beneStateId:"",beneCityId:""}))),getOptionLabel:e=>e?re(e):"",renderInput:e=>(0,Z.jsx)(v.A,{...e,label:n("remesas.calc.location.country"),required:!0})})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:2.3,children:(0,Z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.common.state"),value:Ee.beneStateId,onChange:e=>{const n=e.target.value;$e((e=>({...e,beneStateId:n,beneCityId:""})))},disabled:!Ee.beneCountry,children:Hn.map((e=>(0,Z.jsx)(_.A,{value:_e(e),children:fe(e)},_e(e))))})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:3.2,children:(0,Z.jsx)(b.A,{fullWidth:!0,options:Zn,value:Zn.find((e=>je(e)===Ee.beneCityId))||null,onChange:(e,n)=>$e((e=>({...e,beneCityId:n?je(n):"",beneStateId:n?Ae(n):""}))),getOptionLabel:e=>e?ge(e):"",renderInput:e=>(0,Z.jsx)(v.A,{...e,label:n("remesas.common.city"),disabled:!Ee.beneStateId,required:!0})})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:3,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.address"),value:Ee.beneAddress,onChange:e=>$e((n=>({...n,beneAddress:e.target.value})))})})]})]}):(0,Z.jsx)(c.A,{variant:"body2",color:"text.secondary",children:n("remesas.bene.noneSelected")})]})})]}),!On&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,Z.jsx)(b.A,{fullWidth:!0,options:r,value:se(r,Ee.calcCountry),onChange:(e,n)=>$e((e=>({...e,calcCountry:n?ae(n):"",calcStateId:"",calcCityId:""}))),getOptionLabel:e=>e?`${re(e)}`:"",renderInput:e=>(0,Z.jsx)(v.A,{...e,label:n("remesas.calc.location.country"),required:!0})})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,Z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.common.state"),value:Ee.calcStateId,onChange:e=>{const n=e.target.value;$e((e=>({...e,calcStateId:n,calcCityId:""})))},disabled:!Ee.calcCountry,children:ht.map((e=>(0,Z.jsx)(_.A,{value:_e(e),children:fe(e)},_e(e))))})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,Z.jsx)(b.A,{fullWidth:!0,options:pt,value:pt.find((e=>je(e)===Ee.calcCityId))||null,onChange:(e,n)=>$e((e=>({...e,calcCityId:n?je(n):"",calcStateId:n?Ae(n):""}))),getOptionLabel:e=>e?ge(e):"",renderInput:e=>(0,Z.jsx)(v.A,{...e,label:n("remesas.common.city"),required:!0,disabled:!Ee.calcCountry})})})]}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,Z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.amount.payoutCurrency"),value:Ee.payoutCurrency,onChange:bt("payoutCurrency"),required:!0,children:Qn.map((e=>(0,Z.jsx)(_.A,{value:e.value,children:e.label},e.value)))})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,Z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.amount.calcType"),value:Ee.calcType,onChange:bt("calcType"),required:!0,children:Jn.map((e=>(0,Z.jsx)(_.A,{value:e.value,children:n(`remesas.enums.calcType.${e.value}`)},e.value)))})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.amount.amountWithCurrency",{currency:lt||" "}),value:Ee.amount,onChange:e=>{const n=e.target.value.replace(/,/g,"").replace(/[a-zA-Z]/g,"").replace(/\s+/g,"");bt("amount")({target:{value:n}})},required:!0})}),On&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,Z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.relationship"),value:Ee.relationship,onChange:bt("relationship"),required:!0,children:et.map((e=>(0,Z.jsx)(_.A,{value:e.value,children:n(`remesas.enums.relationship.${e.value}`)},e.value)))})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,Z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.purpose"),value:Ee.purpose_code,onChange:bt("purpose_code"),required:!0,children:nt.map((e=>(0,Z.jsx)(_.A,{value:e.value,children:n(`remesas.enums.purpose.${e.value}`)},e.value)))})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.beneMessage"),value:Ee.bene_message,onChange:bt("bene_message")})})]}),at&&(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.bank.bankDestination"),value:qn,onChange:e=>{wn(e.target.value),Rn(0)},required:!0,disabled:Nn,helperText:Nn?n("remesas.bank.loading"):st.length?n("remesas.bank.choose"):n("remesas.bank.none"),children:st.map((e=>(0,Z.jsx)(_.A,{value:e.id,children:e.name},e.id)))})}),(0,Z.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,Z.jsx)(c.A,{variant:"subtitle1",sx:{mb:1},children:n("remesas.calc.payer.title")}),Tn&&(0,Z.jsxs)(u.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,Z.jsx)(f.A,{size:18,sx:{mr:1}}),(0,Z.jsx)(c.A,{variant:"body2",color:"text.secondary",children:n("remesas.calc.loading")})]}),!Tn&&!it.length&&Ee.amount&&(0,Z.jsx)(c.A,{variant:"body2",color:"error.main",sx:{mb:1},children:n("remesas.calc.noOptions")}),(0,Z.jsx)(m.Ay,{container:!0,spacing:2,children:it.map(((e,t)=>{const a=e.bank_name||e.BankName||"";return(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsxs)(l.A,{onClick:()=>Rn(t),sx:{p:1.12,cursor:"pointer",borderRadius:2,border:Bn===t?"2px solid #1976d2":"0.5px solid #e0e0e0",transition:"0.2s","&:hover":{boxShadow:4}},children:[(0,Z.jsx)(c.A,{variant:"body2",sx:{fontWeight:600,mb:.5},children:At(e.description||e.branch_name||e.payer_name)||"Payer"}),(0,Z.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:e.branch_name||""}),at&&a&&(0,Z.jsxs)(c.A,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:[n("remesas.calc.card.bank")," ",a]}),(0,Z.jsxs)(c.A,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:[n("remesas.calc.card.fxPrefix")," ",null!=e.fx_rate||null!=e.ExchangeRate?parseFloat(e.fx_rate).toFixed(4):"\u2014"," ",e.payment_currency||e.PaymentCurrency||Ee.payoutCurrency||"XXX","/",e.send_currency||e.SendCurrency||Q||"XXX"]}),(0,Z.jsxs)(c.A,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5},children:[n("remesas.calc.card.feesPrefix")," ",(0,J.KZ)(e.fees)," ",e.send_currency||e.SendCurrency||Q]})]})},`${e.payer_id||e.PayerID||"p"}-${e.branch_id||e.BranchID||"b"}-${t}`)}))})]}),On&&at&&(0,Z.jsx)(m.Ay,{item:!0,xs:12,children:(0,Z.jsxs)(l.A,{sx:{p:2,borderRadius:2,mb:1},children:[(0,Z.jsx)(c.A,{variant:"subtitle2",sx:{mb:2},children:n("remesas.bank.info.title")}),(0,Z.jsxs)(m.Ay,{container:!0,spacing:2,children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.bank.info.accountType"),value:nn.bankAccType,onChange:vt("bankAccType"),error:Boolean(an.bankAccType),helperText:an.bankAccType,required:!0,children:Yn.map((e=>(0,Z.jsx)(_.A,{value:e.value,children:n(`remesas.enums.bankAccountType.${e.value}`)},e.value)))})}),(()=>{const e=Xn.toUpperCase();return"AR"===e?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.cbu"),value:nn.CBU,onChange:vt("CBU"),error:Boolean(an.CBU),helperText:an.CBU,required:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.cuit"),value:nn.bankDocument,onChange:vt("bankDocument"),error:Boolean(an.bankDocument),helperText:an.bankDocument,required:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountNumber"),value:nn.bankAccount,onChange:vt("bankAccount"),error:Boolean(an.bankAccount),helperText:an.bankAccount,required:!0})})]}):"BR"===e?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.branch"),value:nn.bankBranch,onChange:vt("bankBranch"),error:Boolean(an.bankBranch),helperText:an.bankBranch,required:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountNumber"),value:nn.bankAccount,onChange:vt("bankAccount"),error:Boolean(an.bankAccount),helperText:an.bankAccount,required:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.cpf"),value:nn.CPF,onChange:vt("CPF"),error:Boolean(an.CPF),helperText:an.CPF,required:!0})})]}):"CL"===e?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountNumber"),value:nn.bankAccount,onChange:vt("bankAccount"),error:Boolean(an.bankAccount),helperText:an.bankAccount,required:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.rut"),value:nn.RUT,onChange:vt("RUT"),error:Boolean(an.RUT),helperText:an.RUT,required:!0})})]}):"US"===e||"USA"===e||"UNITED STATES"===e?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountNumber"),value:nn.bankAccount,onChange:vt("bankAccount"),error:Boolean(an.bankAccount),helperText:an.bankAccount,required:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.routing"),value:nn.RoutingNumber,onChange:vt("RoutingNumber"),error:Boolean(an.RoutingNumber),helperText:an.RoutingNumber,required:!0})})]}):"IN"===e||"INDIA"===e?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountNumber"),value:nn.bankAccount,onChange:vt("bankAccount"),error:Boolean(an.bankAccount),helperText:an.bankAccount,required:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.ifsc"),value:nn.IFSC,onChange:vt("IFSC"),error:Boolean(an.IFSC),helperText:an.IFSC,required:!0})})]}):(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.bank.info.accountOrIban"),value:nn.bankAccount,onChange:vt("bankAccount"),error:Boolean(an.bankAccount),helperText:an.bankAccount,required:!0})})})()]})]})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,children:(0,Z.jsxs)(l.A,{component:W.m.div,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.35,ease:"easeOut"},sx:{p:1.12,borderRadius:2,bgcolor:"rgba(0,128,255,0.03)",border:"0.5px solid rgba(0,128,255,0.25)"},children:[(0,Z.jsxs)(u.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,Z.jsx)(c.A,{variant:"subtitle1",fontWeight:600,children:n("remesas.summary.title")}),(0,Z.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{textTransform:"uppercase",letterSpacing:.6},children:n("remesas.summary.reviewHint")||n("remesas.summary.title")})]}),dt?(0,Z.jsxs)(m.Ay,{container:!0,spacing:1.5,children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,Z.jsxs)(u.A,{component:W.m.div,whileHover:{scale:1.01},transition:{duration:.15},sx:{p:1.12,borderRadius:1.5,bgcolor:"rgba(0,128,255,0.05)"},children:[(0,Z.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{textTransform:"uppercase"},children:n("remesas.summary.inputAmount")}),(0,Z.jsxs)(c.A,{variant:"body1",fontWeight:600,children:[(0,J.KZ)(Ee.amount)," ",lt||""]})]})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,Z.jsxs)(u.A,{component:W.m.div,whileHover:{scale:1.01},transition:{duration:.15},sx:{p:1.12,borderRadius:1.5,bgcolor:"rgba(0,128,255,0.05)"},children:[(0,Z.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{textTransform:"uppercase"},children:n("remesas.summary.network")}),(0,Z.jsx)(c.A,{variant:"body1",fontWeight:600,noWrap:!0,children:At(dt.description||dt.branch_name||dt.payer_name)||"Payer"})]})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,Z.jsxs)(u.A,{component:W.m.div,whileHover:{scale:1.01},transition:{duration:.15},sx:{p:1.12,borderRadius:1.5,bgcolor:"rgba(0, 123, 255, 0.08)",border:"0.5px solid rgba(0, 123, 255, 0.35)"},children:[(0,Z.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{textTransform:"uppercase"},children:n("remesas.summary.toSend")}),(0,Z.jsxs)(c.A,{variant:"body1",fontWeight:600,children:[(0,J.KZ)(dt.send_amount)," ",dt.send_currency||dt.SendCurrency||Q]})]})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,Z.jsxs)(u.A,{component:W.m.div,whileHover:{scale:1.01},transition:{duration:.15},sx:{p:1.12,borderRadius:1.5,bgcolor:"rgba(255,140,0,0.05)"},children:[(0,Z.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{textTransform:"uppercase"},children:n("remesas.summary.fees")}),(0,Z.jsxs)(c.A,{variant:"body1",fontWeight:600,children:[(0,J.KZ)(dt.fees)," ",dt.send_currency||dt.SendCurrency||Q]})]})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,Z.jsxs)(u.A,{component:W.m.div,whileHover:{scale:1.01},transition:{duration:.15},sx:{p:1.12,borderRadius:1.5,bgcolor:"rgba(255,0,0,0.04)"},children:[(0,Z.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{textTransform:"uppercase"},children:n("remesas.summary.taxIVA")}),(0,Z.jsxs)(c.A,{variant:"body1",fontWeight:600,children:[(0,J.KZ)(dt.vat)," ",dt.send_currency||dt.SendCurrency||Q]})]})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,Z.jsxs)(u.A,{component:W.m.div,whileHover:{scale:1.015},transition:{duration:.18},sx:{p:1.12,borderRadius:1.5,bgcolor:"rgba(120, 80, 200, 0.09)",border:"0.5px solid rgba(120, 80, 200, 0.35)"},children:[(0,Z.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{textTransform:"uppercase",letterSpacing:.6},children:n("remesas.summary.totalFees")}),(0,Z.jsxs)(c.A,{variant:"body1",fontWeight:600,children:[(0,J.KZ)(dt.total_fees)," ",dt.send_currency||dt.SendCurrency||Q]})]})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,Z.jsxs)(u.A,{component:W.m.div,whileHover:{scale:1.01},transition:{duration:.15},sx:{p:1.12,borderRadius:1.5,bgcolor:"rgba(76,175,80,0.05)"},children:[(0,Z.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{textTransform:"uppercase"},children:n("remesas.summary.payoutApprox")}),(0,Z.jsxs)(c.A,{variant:"body1",fontWeight:700,children:[(0,J.KZ)(dt.payment_amount)," ",ot.payCurrency]})]})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,Z.jsxs)(u.A,{component:W.m.div,whileHover:{scale:1.01},transition:{duration:.15},sx:{p:1.12,borderRadius:1.5,bgcolor:"rgba(0,0,0,0.03)"},children:[(0,Z.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{textTransform:"uppercase"},children:n("remesas.summary.fxRate")}),(0,Z.jsx)(c.A,{variant:"body1",fontWeight:600,children:parseFloat(dt.fx_rate).toFixed(4)||"\u2014"})]})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,Z.jsxs)(u.A,{component:W.m.div,whileHover:{scale:1.015},transition:{duration:.18},sx:{p:1.12,borderRadius:1.5,bgcolor:"rgba(0, 200, 83, 0.10)",border:"0.5px solid rgba(0, 200, 83, 0.35)"},children:[(0,Z.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{textTransform:"uppercase"},children:n("remesas.summary.totalDebit")}),(0,Z.jsxs)(c.A,{variant:"body1",fontWeight:700,children:[(0,J.KZ)(dt.total_debit)||0," ",dt.send_currency||dt.SendCurrency||Q]})]})})]}):(0,Z.jsx)(c.A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:n("remesas.summary.noResult")})]})}),On&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(v.A,{type:"password",fullWidth:!0,label:n("remesas.confirm.passwordLabel"),value:Ee.password,onChange:bt("password"),required:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,sx:{display:"flex",alignItems:"center"},children:(0,Z.jsx)(A.A,{control:(0,Z.jsx)(j.A,{checked:Ee.acceptTerms,onChange:e=>$e((n=>({...n,acceptTerms:e.target.checked})))}),label:(0,Z.jsxs)(c.A,{variant:"body2",sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:[n("remesas.confirm.acceptPrefix"),(0,Z.jsx)(g.A,{variant:"text",color:"primary",size:"small",href:"/#/termes-conditions",target:"_blank",rel:"noopener",sx:{p:0,minWidth:0,textTransform:"none"},children:n("remesas.confirm.termsLink")})]})})})]})]}),(0,Z.jsxs)(C.A,{direction:"row",justifyContent:"space-between",sx:{mt:3},children:[De>0?(0,Z.jsx)(q.A,{variant:"outlined",onClick:()=>{De>0&&Oe((e=>e-1))},startIcon:(0,Z.jsx)(D.A,{icon:"eva:arrow-back-outline"}),children:n("remesas.actions.back")}):(0,Z.jsx)(u.A,{}),De<Pn.length-1?(0,Z.jsx)(q.A,{variant:"contained",onClick:()=>{De<Pn.length-1&&Oe((e=>e+1))},endIcon:(0,Z.jsx)(D.A,{icon:"eva:arrow-forward-outline"}),disabled:!jt,children:n("remesas.actions.next")}):On&&(0,Z.jsx)(q.A,{variant:"contained",color:"primary",loading:Pe,disabled:!gt,onClick:async()=>{Ue(!0),Ne(null);try{if(On){if(!Un||!Kn||!dt)return void Ue(!1);if(at){const{valid:e,errors:t}=te(Xn,nn,n);if(!e)return rn(t),void Ue(!1)}const e=function(e){const n=G().enc.Utf8.parse("Z8rJf32Qw91xTsHe4LmPq7VyBkC0NsAU"),t=G().lib.WordArray.random(16),a=G().AES.encrypt(JSON.stringify(e),n,{iv:t,mode:G().mode.CBC,padding:G().pad.Pkcs7});return`${t.toString(G().enc.Base64)}:${a.ciphertext.toString(G().enc.Base64)}`}({payer_id:dt.payer_id||dt.payerId||dt.PayerID||dt.PayerId,branch_id:dt.branch_id||dt.BranchID||dt.branchId,bank_id:dt.bank_id||dt.BankID||nn.bankId||"",send_amount:dt.send_amount||dt.SendAmount||"",send_currency:dt.send_currency||dt.SendCurrency||Q,payment_amount:dt.payment_amount||dt.PaymentAmount||"",payment_currency:dt.payment_currency||dt.PaymentCurrency||Ee.payoutCurrency,fees:dt.fees,vat:dt.vat,total_fees:dt.total_fees,fx_rate:dt.fx_rate||"",payer_name:dt.payer_name||dt.PayerName||dt.description||""}),t={sender_id:Un.id||Un.pk,beneficiary_id:Kn.id||Kn.pk,source_country:Y,payout_country:Xn,payout_currency:ot.payCurrency,calc_type:Ee.calcType,amount:String(Ee.amount).replace(",","."),payout_method:null===tt||void 0===tt?void 0:tt.mmCode,relationship:Ee.relationship,purpose_code:Ee.purpose_code,bene_message:Ee.bene_message,password:Ee.password,option:e,bank_info:at?nn:void 0,wallet_phone:rt&&Kn.phone||""},a=await(0,$.T2)(t);Me(n("success.CREATE")),we(s.nB.ticket.view(null===a||void 0===a?void 0:a.ref_code))}}catch(t){var e;const a=(null===t||void 0===t||null===(e=t.response)||void 0===e?void 0:e.data)||{},r=a.code||a.error||t.code||"UNEXPECTED_ERROR",s=a.message||a.detail||t.message||"",i=`remesas.errors.${String(r).toUpperCase()}`,d=n(i,{defaultValue:""})||"",o=d?`${d} (${s})`:s||n("remesas.errors.UNEXPECTED_ERROR");Ne(o),Me(o,{variant:"error"})}Ue(!1)},children:n("remesas.actions.confirm")})]})]})}),(0,Z.jsxs)(k.A,{open:sn,onClose:(e,n)=>{"backdropClick"!==n&&(jn||dn(!1))},fullWidth:!0,maxWidth:"md",children:[(0,Z.jsx)(I.A,{children:n(xn?"remesas.sender.modal.editTitle":"remesas.sender.modal.addTitle")}),(0,Z.jsx)(S.A,{sx:{bgcolor:"background.default","&::before":{content:'""',position:"absolute",inset:0,background:"radial-gradient(circle at 20% 30%, rgba(255,200,120,0.35), transparent 60%), radial-gradient(circle at 80% 70%, rgba(90,150,255,0.3), transparent 60%)",zIndex:0}},children:(0,Z.jsxs)(m.Ay,{container:!0,spacing:2,sx:{mt:.5},children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.firstName"),value:cn.first_name,onChange:_t("first_name"),error:Boolean(vn.first_name),helperText:vn.first_name,required:!0,disabled:xn})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.lastName"),value:cn.last_name,onChange:_t("last_name"),error:Boolean(vn.last_name),helperText:vn.last_name,required:!0,disabled:xn})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.gender"),value:cn.gender,onChange:_t("gender"),children:Vn.map((e=>(0,Z.jsx)(_.A,{value:e.value,children:n(`remesas.enums.gender.${e.value}`)},e.value)))})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(b.A,{fullWidth:!0,options:r,value:se(r,cn.nationality),onChange:(e,n)=>un((e=>({...e,nationality:n?ae(n):"",doc_country:n?ae(n):e.doc_country,stateId:"",state:"",cityId:"",city:""}))),getOptionLabel:e=>e?`${re(e)}`:"",renderInput:e=>(0,Z.jsx)(v.A,{...e,label:n("remesas.form.nationality"),error:Boolean(vn.nationality),helperText:vn.nationality,required:!0})})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsxs)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.maritalStatus"),value:cn.marital_status,onChange:_t("marital_status"),children:[(0,Z.jsx)(_.A,{value:"1",children:n("remesas.maritalStatus.other")}),(0,Z.jsx)(_.A,{value:"2",children:n("remesas.maritalStatus.single")}),(0,Z.jsx)(_.A,{value:"3",children:n("remesas.maritalStatus.married")}),(0,Z.jsx)(_.A,{value:"4",children:n("remesas.maritalStatus.divorced")}),(0,Z.jsx)(_.A,{value:"5",children:n("remesas.maritalStatus.widowed")})]})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.docType"),value:cn.doc_type,onChange:_t("doc_type"),error:Boolean(vn.doc_type),helperText:vn.doc_type,required:!0,children:Gn.map((e=>(0,Z.jsx)(_.A,{value:e.value,children:n(`remesas.enums.docType.${e.value}`)},e.value)))})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.docNumber"),value:cn.doc_number,onChange:_t("doc_number"),error:Boolean(vn.doc_number),helperText:vn.doc_number,required:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(F.l,{label:n("remesas.form.docIssueDate"),format:"yyyy-MM-dd",value:cn.doc_issue_date?new Date(cn.doc_issue_date):null,onChange:e=>un((n=>({...n,doc_issue_date:e?e.toISOString().split("T")[0]:""}))),slotProps:{textField:{fullWidth:!0}},required:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(F.l,{label:n("remesas.form.docDueDate"),format:"yyyy-MM-dd",value:cn.doc_due_date?new Date(cn.doc_due_date):null,onChange:e=>un((n=>({...n,doc_due_date:e?e.toISOString().split("T")[0]:""}))),slotProps:{textField:{fullWidth:!0}},required:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(b.A,{fullWidth:!0,options:r,value:ie(r,cn.doc_country),onChange:(e,n)=>un((e=>({...e,doc_country:n?ae(n):""}))),getOptionLabel:e=>e?`${re(e)}`:"",renderInput:e=>(0,Z.jsx)(v.A,{...e,label:n("remesas.form.docCountry"),error:Boolean(vn.doc_country),helperText:vn.doc_country,required:!0})})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.phone"),value:cn.phone,onChange:_t("phone")})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.common.state"),value:cn.stateId,onChange:e=>{const n=e.target.value,t=ut.find((e=>String(_e(e))===String(n)));un((e=>({...e,stateId:n,state:t?fe(t):"",cityId:"",city:""})))},disabled:!cn.nationality,children:ut.map((e=>(0,Z.jsx)(_.A,{value:_e(e),children:fe(e)},_e(e))))})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(b.A,{fullWidth:!0,options:mt,value:mt.find((e=>je(e)===cn.cityId))||null,onChange:(e,n)=>un((e=>({...e,cityId:n?je(n):"",stateId:n?Ae(n):"",city:n?ge(n):""}))),getOptionLabel:e=>e?ge(e):"",renderInput:e=>(0,Z.jsx)(v.A,{...e,label:n("remesas.common.city"),required:!0,disabled:!cn.nationality})})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.address"),value:cn.address,onChange:_t("address")})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(F.l,{label:n("remesas.form.birthDate"),format:"yyyy-MM-dd",value:cn.dateOfBirth?new Date(cn.dateOfBirth):null,onChange:e=>un((n=>({...n,dateOfBirth:e?e.toISOString().split("T")[0]:""}))),slotProps:{textField:{fullWidth:!0}},disabled:xn})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.activity"),value:cn.activity,onChange:_t("activity")})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.profession"),value:cn.profession,onChange:_t("profession")})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.position"),value:cn.position,onChange:_t("position")})})]})}),(0,Z.jsxs)(T.A,{children:[(0,Z.jsx)(q.A,{onClick:()=>dn(!1),disabled:jn,children:n("remesas.actions.close")}),(0,Z.jsx)(q.A,{variant:"contained",onClick:async()=>{if(_n({}),!cn.first_name.trim())return void _n((e=>({...e,first_name:n("remesas.validation.firstNameRequired")})));if(!cn.last_name.trim())return void _n((e=>({...e,last_name:n("remesas.validation.lastNameRequired")})));if(!cn.nationality)return void _n((e=>({...e,nationality:n("remesas.validation.nationalityRequired")})));if(!cn.doc_type)return void _n((e=>({...e,doc_type:n("remesas.validation.docTypeRequired")})));if(!cn.doc_number.trim())return void _n((e=>({...e,doc_number:n("remesas.validation.docNumberRequired")})));if(!cn.doc_issue_date)return void _n((e=>({...e,doc_issue_date:n("remesas.validation.docIssueDateRequired")})));if(!cn.doc_due_date)return void _n((e=>({...e,doc_due_date:n("remesas.validation.docDueDateRequired")})));if(!cn.doc_country)return void _n((e=>({...e,doc_country:n("remesas.validation.docCountryRequired")})));const e=ke(cn);try{let n;if(gn(!0),xn)n=await(0,$.$S)(xn,e),Ke((e=>e.map((e=>String(e.id||e.pk)===String(xn)?n:e))));else{n=await(0,$.CW)(e);const t=n.id||n.pk;Ke((e=>[...e,n])),Ve((e=>({...e,[t]:[]}))),$e((e=>({...e,selectedSenderId:t,selectedBeneId:""})))}un(We),hn(null),dn(!1)}catch(c){var t,a,r,s,i,d,o,l;const e=(null===c||void 0===c||null===(t=c.response)||void 0===t?void 0:t.data)||{},n={};null!==(a=e.first_name)&&void 0!==a&&a.length&&(n.first_name=e.first_name[0]),null!==(r=e.last_name)&&void 0!==r&&r.length&&(n.last_name=e.last_name[0]),null!==(s=e.doc_type)&&void 0!==s&&s.length&&(n.doc_type=e.doc_type[0]),null!==(i=e.doc_number)&&void 0!==i&&i.length&&(n.doc_number=e.doc_number[0]),null!==(d=e.doc_issue_date)&&void 0!==d&&d.length&&(n.doc_issue_date=e.doc_issue_date[0]),null!==(o=e.doc_due_date)&&void 0!==o&&o.length&&(n.doc_due_date=e.doc_due_date[0]),null!==(l=e.doc_country)&&void 0!==l&&l.length&&(n.doc_country=e.doc_country[0]),_n(n)}finally{gn(!1)}},loading:jn,children:n(xn?"remesas.actions.update":"remesas.actions.add")})]})]}),(0,Z.jsxs)(k.A,{open:on,onClose:(e,n)=>{"backdropClick"!==n&&(Cn||ln(!1))},fullWidth:!0,maxWidth:"md",children:[(0,Z.jsx)(I.A,{children:n(pn?"remesas.bene.modal.editTitle":"remesas.bene.modal.addTitle")}),(0,Z.jsx)(S.A,{sx:{bgcolor:"background.default","&::before":{content:'""',position:"absolute",inset:0,background:"radial-gradient(circle at 20% 30%, rgba(255,200,120,0.35), transparent 60%), radial-gradient(circle at 80% 70%, rgba(90,150,255,0.3), transparent 60%)",zIndex:0}},children:(0,Z.jsxs)(m.Ay,{container:!0,spacing:2,sx:{mt:.5},children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.firstName"),value:mn.first_name,onChange:ft("first_name"),error:Boolean(fn.first_name),helperText:fn.first_name,required:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.lastName"),value:mn.last_name,onChange:ft("last_name"),error:Boolean(fn.last_name),helperText:fn.last_name,required:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(b.A,{fullWidth:!0,options:r,value:se(r,mn.nationality),onChange:(e,n)=>yn((e=>({...e,nationality:n?ae(n):"",doc_country:n?ae(n):e.doc_country,stateId:"",state:"",cityId:"",city:""}))),getOptionLabel:e=>e?`${re(e)}`:"",renderInput:e=>(0,Z.jsx)(v.A,{...e,label:n("remesas.form.nationality"),error:Boolean(fn.nationality),helperText:fn.nationality,required:!0})})}),"HT"!==mn.nationality&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.form.docType"),value:mn.doc_type,onChange:ft("doc_type"),error:Boolean(fn.doc_type),helperText:fn.doc_type,required:!0,children:Gn.map((e=>(0,Z.jsx)(_.A,{value:e.value,children:n(`remesas.enums.docType.${e.value}`)},e.value)))})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.docNumber"),value:mn.doc_number,onChange:ft("doc_number"),error:Boolean(fn.doc_number),helperText:fn.doc_number,required:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(F.l,{label:n("remesas.form.docIssueDate"),format:"yyyy-MM-dd",value:mn.doc_issue_date?new Date(mn.doc_issue_date):null,onChange:e=>yn((n=>({...n,doc_issue_date:e?e.toISOString().split("T")[0]:""}))),slotProps:{textField:{fullWidth:!0}},required:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(F.l,{label:n("remesas.form.docDueDate"),format:"yyyy-MM-dd",value:mn.doc_due_date?new Date(mn.doc_due_date):null,onChange:e=>yn((n=>({...n,doc_due_date:e?e.toISOString().split("T")[0]:""}))),slotProps:{textField:{fullWidth:!0}},required:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(b.A,{fullWidth:!0,options:r,value:ie(r,mn.doc_country),onChange:(e,n)=>yn((e=>({...e,doc_country:n?ae(n):""}))),getOptionLabel:e=>e?`${re(e)}`:"",renderInput:e=>(0,Z.jsx)(v.A,{...e,label:n("remesas.form.docCountry"),error:Boolean(fn.doc_country),helperText:fn.doc_country,required:!0})})})]}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.phone"),value:mn.phone,onChange:ft("phone")})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(v.A,{select:!0,fullWidth:!0,label:n("remesas.common.state"),value:mn.stateId,onChange:e=>{const n=e.target.value,t=yt.find((e=>String(_e(e))===String(n)));yn((e=>({...e,stateId:n,state:t?fe(t):"",cityId:"",city:""})))},children:yt.map((e=>(0,Z.jsx)(_.A,{value:_e(e),children:fe(e)},_e(e))))})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(b.A,{fullWidth:!0,options:xt,value:xt.find((e=>je(e)===mn.cityId))||null,onChange:(e,n)=>yn((e=>({...e,cityId:n?je(n):"",stateId:n?Ae(n):"",city:n?ge(n):""}))),getOptionLabel:e=>e?ge(e):"",renderInput:e=>(0,Z.jsx)(v.A,{...e,label:n("remesas.common.city"),required:!0,disabled:!mn.nationality})})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:4,children:(0,Z.jsx)(v.A,{fullWidth:!0,label:n("remesas.form.address"),value:mn.address,onChange:ft("address")})})]})}),(0,Z.jsxs)(T.A,{children:[(0,Z.jsx)(q.A,{onClick:()=>ln(!1),disabled:Cn,children:n("remesas.actions.close")}),(0,Z.jsx)(q.A,{variant:"contained",onClick:async()=>{if(An({}),!Ee.selectedSenderId)return;const e="HT"===mn.nationality;if(!mn.first_name.trim())return void An((e=>({...e,first_name:n("remesas.validation.firstNameRequired")})));if(!mn.last_name.trim())return void An((e=>({...e,last_name:n("remesas.validation.lastNameRequired")})));if(!mn.nationality)return void An((e=>({...e,nationality:n("remesas.validation.nationalityRequired")})));if(!e){if(!mn.doc_type)return void An((e=>({...e,doc_type:n("remesas.validation.docTypeRequired")})));if(!mn.doc_number.trim())return void An((e=>({...e,doc_number:n("remesas.validation.docNumberRequired")})));if(!mn.doc_issue_date)return void An((e=>({...e,doc_issue_date:n("remesas.validation.docIssueDateRequired")})));if(!mn.doc_due_date)return void An((e=>({...e,doc_due_date:n("remesas.validation.docDueDateRequired")})));if(!mn.doc_country)return void An((e=>({...e,doc_country:n("remesas.validation.docCountryRequired")})))}const t=Ie(mn);try{let e;if(kn(!0),pn)e=await(0,$.lR)(pn,t),Ve((n=>({...n,[Ee.selectedSenderId]:(n[Ee.selectedSenderId]||[]).map((n=>String(n.id||n.pk)===String(pn)?e:n))})));else{e=await(0,$.M8)(Ee.selectedSenderId,t);const n=e.id||e.pk;Ve((n=>({...n,[Ee.selectedSenderId]:[...n[Ee.selectedSenderId]||[],e]}))),$e((e=>({...e,selectedBeneId:n})))}yn(Be),bn(null),ln(!1)}catch(u){var a,r,s,i,d,o,l,c;const e=(null===u||void 0===u||null===(a=u.response)||void 0===a?void 0:a.data)||{},n={};null!==(r=e.first_name)&&void 0!==r&&r.length&&(n.first_name=e.first_name[0]),null!==(s=e.last_name)&&void 0!==s&&s.length&&(n.last_name=e.last_name[0]),null!==(i=e.doc_type)&&void 0!==i&&i.length&&(n.doc_type=e.doc_type[0]),null!==(d=e.doc_number)&&void 0!==d&&d.length&&(n.doc_number=e.doc_number[0]),null!==(o=e.doc_issue_date)&&void 0!==o&&o.length&&(n.doc_issue_date=e.doc_issue_date[0]),null!==(l=e.doc_due_date)&&void 0!==l&&l.length&&(n.doc_due_date=e.doc_due_date[0]),null!==(c=e.doc_country)&&void 0!==c&&c.length&&(n.doc_country=e.doc_country[0]),An(n)}finally{kn(!1)}},loading:Cn,disabled:!Ee.selectedSenderId,children:n(pn?"remesas.actions.update":"remesas.actions.add")})]})]})]})]})}):(0,Z.jsxs)(l.A,{sx:{p:5,textAlign:"center"},children:[(0,Z.jsx)(c.A,{variant:"h6",color:"error",sx:{mb:1},children:n("intl_transfer_denied_title")}),(0,Z.jsx)(c.A,{variant:"body2",sx:{color:"text.secondary"},children:n("intl_transfer_denied_desc")})]})}function qe(){const{themeStretch:e}=(0,i.A)(),{t:n}=(0,N.B)();return(0,Z.jsx)(d.A,{title:`Configuration: ${n("p_sendtransfer.sendtransfer")}`,children:(0,Z.jsxs)(r.A,{maxWidth:!e&&"lg",children:[(0,Z.jsx)(o.A,{heading:n("p_sendtransfer.sendtransfer"),links:[{name:n("params.dashboard"),href:s.nB.root},{name:n("p_sendtransfer.sendtransfer")}]}),(0,Z.jsx)(Re,{})]})})}},50477:()=>{}}]);
//# sourceMappingURL=623.0dfb3536.chunk.js.map